- 
- `call/apply/bind` - å¯¹`this`æŒ‡å‘çš„ç†è§£
- æ‰‹å†™`promise` - å¯¹å¼‚æ­¥çš„ç†è§£
- æ‰‹å†™åŸç”Ÿ`ajax` - å¯¹`ajax`åŸç†å’Œ`http`è¯·æ±‚æ–¹å¼çš„ç†è§£ï¼Œé‡ç‚¹æ˜¯`get`å’Œ`post`è¯·æ±‚çš„å®ç°

### Promise

new Promise((resolve, reject) => {...}) **åˆ›å»ºä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡**ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª**æ‰§è¡Œå™¨å‡½æ•°** (resolve, reject) => {...} ä½œä¸ºå‚æ•°ã€‚

- **resolve(value)**ï¼šä½¿ Promise å˜ä¸º **fulfilledï¼ˆå·²å®Œæˆï¼‰** çŠ¶æ€ï¼Œå¹¶è¿”å› value
- **reject(reason)**ï¼šä½¿ Promise å˜ä¸º **rejectedï¼ˆå·²æ‹’ç»ï¼‰** çŠ¶æ€ï¼Œå¹¶è¿”å› reasonã€‚

#### æ‰‹å†™å®ç°Promise

```js
class MyPromise{
  constructor(executor){
    this.state = 'pending'; // 'pending', 'fulfilled', 'rejected'
    this.value = undefined; // å­˜å‚¨æœ€ç»ˆçš„å€¼
    this.reason = undefined; // å­˜å‚¨æ‹’ç»çš„åŸå› 
    this.onFullfilledCallbacks = []; // å­˜å‚¨æˆåŠŸçš„å›è°ƒ
    this.onRejectedCallbacks = []; // å­˜å‚¨å¤±è´¥çš„å›è°ƒ
  
    const resolve = (value) => {
      if(this.state = 'pending'){
        this.state = 'fulfilled';
        this.value = value;
        this.onFullfilledCallbacks.foEach(fn => fn(value))
      }
    }

    const reject = (reason) => {
      if(this.state = 'pending'){
        this.state = 'rejected';
        this.value = reason;
        this.onRejectedCallbacks.foEach(fn => fn(reason))
      }
    }
  
    // æ‰§è¡Œä¼ å…¥çš„ executor å‡½æ•°ï¼ˆæ‰§è¡Œå™¨å‡½æ•°ï¼‰
    try{
      executor(resolve, reject);
    } catch(e){
      reject(e);
    }
  }
  
  then(onFulfilled, onRejected) {
    if (this.state === 'PENDING') {
      this.onFullfilledCallbacks.push(onFulfilled);
      this.onRejectedCallbacks.push(onRejected);
      
    }
    
    if (this.state === 'RESOLVED') {
      onFulfilled(this.value);
    }
    
    if (this.state === 'REJECTED') {
      onRejected(this.reason);
    }
  }
}
```

æ¯æ¬¡ .then **éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promise**ï¼Œè¿™æ ·æ‰èƒ½è®©ä¸‹ä¸€ä¸ª .then ç»§ç»­å¤„ç†å‰ä¸€ä¸ª .then çš„è¿”å›å€¼ã€‚

å› ä¸º**Promise è§„èŒƒè¦æ±‚ then é‡Œçš„å›è°ƒå¿…é¡»æ˜¯å¼‚æ­¥æ‰§è¡Œçš„**ï¼Œå³**å¿…é¡»ç­‰ä¸»çº¿ç¨‹çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œ**ï¼Œå†æ‰§è¡Œ .then é‡Œçš„å›è°ƒã€‚

å¦‚æœ Promise é‡Œçš„å›è°ƒ **ç«‹å³æ‰§è¡Œ**ï¼Œå¯èƒ½ä¼šæ‰“ä¹±ä¸»çº¿ç¨‹çš„ä»£ç æ‰§è¡Œé¡ºåºï¼Œå¯¼è‡´**ä¸å¯é¢„æµ‹çš„è¡Œä¸º**ã€‚

```js
then(onFulfilled, onRejected) {
  return new MyPromise((resolve, reject) => {
    if (this.state === "fulfilled") {
      setTimeout(() => resolve(onFulfilled(this.value)), 0);
    } else if (this.state === "rejected") {
      setTimeout(() => reject(onRejected(this.reason)), 0);
    } else {
      this.onFulfilledCallbacks.push(value => {
        resolve(onFulfilled(value));
      });
      this.onRejectedCallbacks.push(reason => {
        reject(onRejected(reason));
      });
    }
  });
}
```

åŸç”Ÿ Promise ä¸æ˜¯ç”¨ setTimeoutï¼Œè€Œæ˜¯**ä½¿ç”¨å¾®ä»»åŠ¡é˜Ÿåˆ—**ï¼š

```js
queueMicrotask(() => resolve(onFulfilled(this.value)));
```

æˆ–è€…ç”¨ MutationObserver å®ç°å¾®ä»»åŠ¡ï¼š

```js
const microTask = (callback) => {
  const observer = new MutationObserver(callback);
  const textNode = document.createTextNode("0");
  observer.observe(textNode, { characterData: true });
  textNode.data = "1"; // è§¦å‘å¾®ä»»åŠ¡
};

then(onFulfilled, onRejected) {
  return new MyPromise((resolve, reject) => {
    if (this.state === "fulfilled") {
      microTask(() => resolve(onFulfilled(this.value)));
    } else if (this.state === "rejected") {
      microTask(() => reject(onRejected(this.reason)));
    }
  });
}
```



**å®ç°Promise.resolve**

```js
Promise.resolve = (param) => {
  if(param instanceof Promise){
    return param;
  }
  return new Promise((resolve, reject)=> {
    if(param && param.then && typeof param.then === 'function'){
      // å¦‚æœ param æ˜¯ Thenableï¼Œè°ƒç”¨å®ƒçš„ then æ–¹æ³•
      params.then(resolve, reject);
    } else {
      // è®©æ–°åˆ›å»ºçš„ Promise ç›´æ¥è¿›å…¥ fulfilled çŠ¶æ€ï¼Œå¹¶æºå¸¦ param ä½œä¸ºç»“æœã€‚
      resolve(param);
    }
  } )
}
```

**å®ç°Promise.reject**

```js
Promise.reject((reson)=>{
  return new Promise((resolve, reject) => {
    reject(reason)
  })
})
```

**å®ç°Promise.prototype.finally**

**finally æ˜¯å®ä¾‹æ–¹æ³•**ï¼Œå› ä¸ºå®ƒæ˜¯åœ¨å·²å­˜åœ¨çš„ Promise å®ä¾‹ä¸Šæ‰§è¡Œçš„ï¼Œç”¨æ¥å¤„ç†å®Œæˆæ—¶çš„å‰¯ä½œç”¨ï¼Œå¹¶ä¸”ä¸æ”¹å˜åŸ Promise çš„æœ€ç»ˆç»“æœã€‚

åœ¨ JavaScript ä¸­ï¼ŒPromise ç±»ä½¿ç”¨äº†é™æ€æ–¹æ³•ï¼ˆä¾‹å¦‚ Promise.resolve()ã€Promise.reject() å’Œ Promise.all()ï¼‰æ¥åˆ›å»ºæ–°çš„ Promise å®ä¾‹ï¼Œè€Œ finally åˆ™æ˜¯ä½œä¸ºå®ä¾‹æ–¹æ³•æ”¾åœ¨åŸå‹ä¸Šï¼Œå› ä¸ºå®ƒä½œç”¨äºå·²ç»å­˜åœ¨çš„ Promise å®ä¾‹ï¼Œç”¨æ¥åœ¨ Promise å®Œæˆæ—¶æ‰§è¡Œä¸€äº›å‰¯ä½œç”¨ã€‚


- `finally`é‡Œçš„å›è°ƒå‡½æ•°ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¼šæ‰§è¡Œï¼Œå¹¶ä¼šæŠŠå‰é¢çš„å€¼åŸå°ä¸åŠ¨ä¼ é€’ç»™ä¸‹ä¸€ä¸ª`then`æ–¹æ³•ä¸­
- å¦‚æœ`finally`å‡½æ•°ä¸­æœ‰`promise`ç­‰å¼‚æ­¥ä»»åŠ¡ï¼Œä¼šç­‰å®ƒä»¬å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ï¼Œå†ç»“åˆä¹‹å‰çš„æˆåŠŸä¸å¦çŠ¶æ€ï¼Œè¿”å›å€¼

```js
Promise.prototype.finally = function(callback) {
  return this.then(
    (data) => {
      return Promise.resolve(callback()).then(() => data); // ä¿ç•™åŸå§‹ Promise çš„æˆåŠŸå€¼
    },
    (err) => {
      return Promise.resolve(callback()).then(() => {
        throw err; // ä¿ç•™åŸå§‹ Promise çš„å¤±è´¥é”™è¯¯
      });
    }
  );
}
```

**å®ç°Promise.all**

```js
Promise.all = function(promises) {
  return new Promise((resolve, reject) => {
    let result = [];
    let index = 0;
    let len = promises.length;
    if(len === 0) {
      resolve(result);
      return;
    }
   
    for(let i = 0; i < len; i++) {
      // ä¸ºä»€ä¹ˆä¸ç›´æ¥ promise[i].then, å› ä¸ºpromise[i]å¯èƒ½ä¸æ˜¯ä¸€ä¸ªpromise
      // å¦‚æœ promises[i] æ˜¯ä¸€ä¸ªæ™®é€šçš„å€¼ï¼ˆè€Œä¸æ˜¯ä¸€ä¸ª Promiseï¼‰ï¼ŒPromise.resolve ä¼šå°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå·²è§£æçš„ Promiseã€‚
      Promise.resolve(promise[i]).then(data => {
        result[i] = data;
        index++;
        if(index === len) resolve(result);
      }).catch(err => {
        reject(err);
      })
    }
  })
}

```

**å®ç°Promise.allsettle**

```js
function isPromise (val) {
  return typeof val.then === 'function'; // (123).then => undefined
}

Promise.allSettled = function(promises) {
  return new Promise((resolve, reject) => {
    // arr ç”¨æ¥å­˜å‚¨æ¯ä¸ª Promise çš„çŠ¶æ€å’Œç»“æœ
    let arr = [];
    // times ç”¨æ¥è®°å½•å·²å®Œæˆï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰çš„ Promise æ•°é‡ï¼Œç¡®ä¿åœ¨æ‰€æœ‰ Promise å®Œæˆæ—¶ï¼Œresolve ä¼šè¢«è°ƒç”¨ï¼Œè¿”å›åŒ…å«æ¯ä¸ª Promise çŠ¶æ€çš„æ•°ç»„ã€‚
    let times = 0;
    const setData = (index, data) => {
      arr[index] = data;
      if (++times === promises.length) {
        resolve(arr);
      }
    }

    for (let i = 0; i < promises.length; i++) {
      let current = promises[i];
      if (isPromise(current)) {
        current.then((data) => {
          setData(i, { status: 'fulfilled', value: data });
        }, err => {
          setData(i, { status: 'rejected', value: err })
        })
      } else {
        setData(i, { status: 'fulfilled', value: current })
      }
    }
  })
}

```

**å®ç°Promise.allsettle**

```js
Promise.race = function(promises) {
  return new Promise((resolve, reject) => {
    let len = promises.length;
    if(len === 0) return;
    for(let i = 0; i < len; i++) {
      Promise.resolve(promise[i]).then(data => {
        resolve(data);
        return;
      }).catch(err => {
        reject(err);
        return;
      })
    }
  })
}

```



### é˜²æŠ–

```js
// funcæ˜¯ç”¨æˆ·ä¼ å…¥éœ€è¦é˜²æŠ–çš„å‡½æ•°
// waitæ˜¯ç­‰å¾…æ—¶é—´
const debounce = (func, wait = 50) => {
  // ç¼“å­˜ä¸€ä¸ªå®šæ—¶å™¨id
  let timer = 0
  // è¿™é‡Œè¿”å›çš„å‡½æ•°æ˜¯æ¯æ¬¡ç”¨æˆ·å®é™…è°ƒç”¨çš„é˜²æŠ–å‡½æ•°
  // å¦‚æœå·²ç»è®¾å®šè¿‡å®šæ—¶å™¨äº†å°±æ¸…ç©ºä¸Šä¸€æ¬¡çš„å®šæ—¶å™¨
  // å¼€å§‹ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨ï¼Œå»¶è¿Ÿæ‰§è¡Œç”¨æˆ·ä¼ å…¥çš„æ–¹æ³•
  return function(...args) {
    if (timer) clearTimeout(timer)
    timer = setTimeout(() => {
      func.apply(this, args)
    }, wait)
  }
}

```



### æ‰‹å†™new

```js
function myNew(constructor, ...args) {
    // 1. åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ï¼Œå¹¶æŠŠå®ƒçš„ `__proto__` å…³è”åˆ°æ„é€ å‡½æ•°çš„ `prototype`
    const obj = Object.create(constructor.prototype);
    
    // 2. è°ƒç”¨æ„é€ å‡½æ•°ï¼Œå¹¶å°† `this` ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡
    const result = constructor.apply(obj, args);
    
    // 3. å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å›è¯¥å¯¹è±¡ï¼Œå¦åˆ™è¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡
    return result instanceof Object ? result : obj;
}
```

æµ‹è¯•ä»£ç 

```js
function Person(name, age) {
    this.name = name;
    this.age = age;
}

const person1 = myNew(Person, "Alice", 25);
console.log(person1.name); // Alice
console.log(person1.age);  // 25
console.log(person1 instanceof Person); // true
```



### æ­£åˆ™çš„æ–¹å¼æ ¹æ®nameè·å¾—cookie

```js
function getCookie(name) {
  var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]*)'));
  return match ? decodeURIComponent(match[2]) : null;
}
```



### æ‰‹å†™call && apply && bind

**call**

```js
Function.prototype.myCall = function (context, ...args) {
  if (typeof this !== "function") {
    throw new TypeError("Not a function");
  }
  
  context = context || globalThis; // `null` å’Œ `undefined` æŒ‡å‘ `window` æˆ– `globalThis`
  const fnKey = Symbol(); // ç”¨ Symbol é¿å…å±æ€§å†²çª
  context[fnKey] = this; // `this` æŒ‡å‘è°ƒç”¨ `myCall` çš„å‡½æ•°
  
  const result = context[fnKey](...args); // æ‰§è¡Œå‡½æ•°
  delete context[fnKey]; // åˆ é™¤ä¸´æ—¶å±æ€§ï¼Œé˜²æ­¢æ±¡æŸ“

  return result;
};

// âœ… æµ‹è¯• `myCall`
function greet(greeting, punctuation) {
  console.log(`${greeting}, ${this.name}${punctuation}`);
}

const person = { name: "Alice" };

greet.myCall(person, "Hello", "!"); // Hello, Alice!
```

**apply**

```js
Function.prototype.myApply = function (context, argsArray) {
  if (typeof this !== "function") {
    throw new TypeError("Not a function");
  }

  context = context || globalThis;
  const fnKey = Symbol();
  context[fnKey] = this;

  const result = argsArray ? context[fnKey](...argsArray) : context[fnKey](); // å¤„ç† `undefined`
  delete context[fnKey];

  return result;
};

// âœ… æµ‹è¯• `myApply`
greet.myApply(person, ["Hi", "."]); // Hi, Alice.
```

**bind**

```js
Function.prototype.myBind = function (context, ...bindArgs) {
  if (typeof this !== "function") {
    throw new TypeError("Not a function");
  }

  const self = this; // ä¿ç•™åŸå‡½æ•°
  
  return function boundFunction(...callArgs) {
    return self.apply(context, [...bindArgs, ...callArgs]); // ç»„åˆå‚æ•°
  };
};

// âœ… æµ‹è¯• `myBind`
const boundGreet = greet.myBind(person, "Hey");
boundGreet("!!"); // Hey, Alice!!
```



### æµ…æ‹·è´å’Œæ·±æ‹·è´

- **æµ…æ‹·è´**ï¼šä»…å¤åˆ¶å¯¹è±¡çš„ç¬¬ä¸€å±‚å±æ€§ï¼ŒåµŒå¥—å¯¹è±¡ä¼šå…±äº«å¼•ç”¨ã€‚
- **æ·±æ‹·è´**ï¼šé€’å½’å¤åˆ¶å¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œç¡®ä¿åµŒå¥—å¯¹è±¡ä¸å…±äº«å¼•ç”¨ã€‚

æµ…æ‹·è´åªå¤åˆ¶äº†å¯¹è±¡æˆ–æ•°ç»„çš„**ç¬¬ä¸€å±‚å±æ€§**ï¼Œå¦‚æœæŸä¸ªå±æ€§å€¼æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼ˆå³å¼•ç”¨ç±»å‹ï¼‰ï¼Œé‚£ä¹ˆ**æµ…æ‹·è´**ä¼šå¤åˆ¶è¯¥å±æ€§çš„å¼•ç”¨ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡æˆ–æ•°ç»„ã€‚

```js
// æµ…æ‹·è´
const copy = (obj) => {
	let shallowCopy;
  // æˆ–è€…const shallowCopy = { ...obj };
  for(let key in obj){
    shallowCopy[key] = obj[key];
  }
  return shallowCopy;
}
```



**ä½¿ç”¨ JSON.parse() å’Œ JSON.stringify()**å®ç°æ·±æ‹·è´ï¼ˆé€‚ç”¨äºå¯¹è±¡ä¸­æ²¡æœ‰å‡½æ•°ã€undefined æˆ–ç‰¹æ®Šå¯¹è±¡ï¼‰ï¼š

```js
const obj = { a: 1, b: { c: 2 } };
const deepCopy = JSON.parse(JSON.stringify(obj));
deepCopy.b.c = 3;

console.log(obj.b.c);  // 2
console.log(deepCopy.b.c);  // 3
```



**ä½¿ç”¨é€’å½’å®ç°æ·±æ‹·è´**ï¼ˆé€‚ç”¨äºæ›´å¤æ‚çš„æƒ…å†µï¼‰ï¼š

```js
function deepClone(obj) {
  if (obj === null || typeof obj !== 'object') {
    return obj;  // ç›´æ¥è¿”å›åŸºæœ¬æ•°æ®ç±»å‹
  }

  // åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æˆ–æ•°ç»„
  const copy = Array.isArray(obj) ? [] : {};

  for (const key in obj) {
    if (obj.hasOwnProperty(key)) {
      copy[key] = deepClone(obj[key]);  // é€’å½’æ‹·è´
    }
  }
  
  return copy;
}

const obj = { a: 1, b: { c: 2 } };
const deepCopy = deepClone(obj);
deepCopy.b.c = 3;

console.log(obj.b.c);  // 2
console.log(deepCopy.b.c);  // 3
```



### è®¡æ•°å™¨

```js

```



### ç‰ˆæœ¬å·æ¯”è¾ƒ

```js

```



### å¤§æ•°ç›¸åŠ 



### æŸ¯é‡ŒåŒ–



### æ•°ç»„ç›¸å…³

##### splice

spliceè¿”å›åŸæ•°ç»„

- **start**: å¿…éœ€ã€‚æŒ‡å®šä¿®æ”¹çš„èµ·å§‹ä½ç½®ï¼ˆä»ç´¢å¼• 0 å¼€å§‹ï¼‰ã€‚å¦‚æœä¸ºè´Ÿæ•°ï¼Œåˆ™ä»æ•°ç»„çš„å°¾éƒ¨å¼€å§‹è®¡ç®—ä½ç½®ã€‚

- **deleteCount**: å¯é€‰ã€‚æŒ‡å®šè¦åˆ é™¤çš„å…ƒç´ æ•°é‡ã€‚å¦‚æœä¸º 0ï¼Œåˆ™ä¸ä¼šåˆ é™¤å…ƒç´ ã€‚å¦‚æœä¸æä¾›è¯¥å‚æ•°ï¼Œåˆ™ä¼šåˆ é™¤ä» start å¼€å§‹çš„æ‰€æœ‰å…ƒç´ ã€‚

- **item1, item2, ..., itemN**: å¯é€‰ã€‚è¦æ·»åŠ åˆ°æ•°ç»„ä¸­çš„å…ƒç´ ã€‚å¦‚æœæ²¡æœ‰æä¾›ï¼Œåˆ™è¡¨ç¤ºä»…åˆ é™¤å…ƒç´ ï¼Œä¸æ·»åŠ æ–°å…ƒç´ ã€‚

```js
array.splice(start, deleteCount, item1, item2, ..., itemN);
```

##### slice

slice() æ–¹æ³•ç”¨äºä»æ•°ç»„ä¸­è¿”å›ä¸€ä¸ª**æµ…æ‹·è´**çš„éƒ¨åˆ†æ–°æ•°ç»„ã€‚å®ƒä¸æ”¹å˜åŸæ•°ç»„ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚slice() å¯ä»¥ç”¨æ¥æå–æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œæˆ–ä»…ä»…å°†æ•´ä¸ªæ•°ç»„å¤åˆ¶ä¸€ä»½ã€‚

```js
array.slice(begin, end);
```

**å®ç°forEachæ–¹æ³•**

```js
Array.prototype.forEach = function(callback, context){
  let self = this,
      len = self.length;
  for(let i=0; i< len; i++){
    typeof callback === 'function' && callback.call(context??undefined, self[i], i)
  }
}
```

**å®ç°filteræ–¹æ³•**

```js
Array.prototype.filter = function(callback, context){
  const self = this,
        len = self.length;
  let newArray = [];
  for(let i = 0; i < len; i++){
    if(callback.apply(context??undefined, [self[i],i])){
      newArray.push(self[i]);
    }
  }
  return newArray;
}
```

**å®ç°findæ–¹æ³•**

```js
// find ä¼šéå†æ‰€æœ‰çš„å…ƒç´ ï¼Œæ‰§è¡Œä½ ç»™å®šçš„å¸¦æœ‰æ¡ä»¶è¿”å›å€¼çš„å‡½æ•°
Array.prototype.find = function(callback){
  const self = this,
        len = self.length;
  for(let i =0; i < len; i++){
    if (callback(self[i], i)) {
      return self[i]
      // findIndexå°±return i
    }
  }
}
```

**å®ç°mapæ–¹æ³•**

```js
Array.prototype.map = function(callback, context){
  // mapä¸æ”¹å˜åŸæ•°ç»„ è¿”å›æ–°æ•°ç»„
  const arr = [...Array],
        len = self.length;
  let res = [];
  for(let i =0; i < len; i++){
    res.push(callback.call(context??undefined, arr[i], i));
  }
  return res;
}
```

**å®ç°reduceæ–¹æ³•**

```js
Array.prototype.reduce = function(callback, initialValue){
	const self = this,
        arr = [...self],
        len = self.length;
  res = initialValue ? initialValue : 0; // ä¸ä¼ é»˜è®¤å–æ•°ç»„ç¬¬ä¸€é¡¹
  startIndex = 0;
  for(let i = 0; i < len; i++){
    res = callback.call(undefined, res, arr[i], i, arr);
  }
  return res;
}
```

**å®ç°everyæ–¹æ³•**

```js
Array.prototype.every = function(callback, context){
	const self = this,
        arr = [...self],
				len = self.length;
	for(let i = 0; i< len; i++){
		 if(!callback.call(context, arr[i], i, arr)){
		 		return false;
		 }
	}
  return true;
}
```

**å®ç°someæ–¹æ³•**

```js
Array.prototype.come = function(callback, context){
  const self = this,
        arr = [...self],
        len = self.length;
  for(let i = 0; i < len; i++){
    if(callback.call(context??undefined, arr[i], i, arr)){
      return true;
    }
  }
  return false;
}
```

**å®ç°Array.of**

```js
Array.of = function(arg){
	return [].slice.call(arg);
}
```

#### å®ç°æ•°ç»„æ‰å¹³åŒ–flat

1. ```js
   arr_flat = arr.flat(Infinity);
   ```

2. ```js
   // é€’å½’çš„ä¸€ç§ reduceå®ç°
   // å¦‚æœ cur æ˜¯æ•°ç»„ï¼Œå°±é€’å½’è°ƒç”¨ flatten(cur)ï¼Œå¦åˆ™ç›´æ¥æ·»åŠ åˆ° acc é‡Œã€‚
   const flatten = function(arr){
   	return arr.reduce((acc,curr) => {
   		return acc.concat(Array.isArray(cur) ? flatten(cur) : cur);
   	},[])
   }
   ```

3. ```js
   // spliteåˆ†å‰²åä»¥æ•°ç»„è¿”å›
   ary = str.replace(/(\[|\])/g, '').split(',');
   ```

4. ```js
   str = str.replace(/(\[\]))/g, '');
   str = '[' + str + ']';
   // JSON.parse()å°† JSON å­—ç¬¦ä¸²è§£æä¸º JavaScript å¯¹è±¡ï¼ˆæˆ–æ•°ç»„ï¼‰ã€‚
   ary = JSON.parse(str);
   ```

5. ```js
   // è¿­ä»£ æ¯æ¬¡å±•å¼€ä¸€å±‚
   function flatten(arr) {
     if (!arr.length) return;
     while (arr.some((item) => Array.isArray(item))) {
       arr = [].concat(...arr);
     }
     return arr;
   }
   ```



#### å®ç°Array.isArrayæ–¹æ³•

```js
Array.isArray = function(value){
	return Object.prototype.toString.call(value) === '[object Array]'
} 
```



#### æ•°ç»„å»é‡

1. ```js
   // ç”¨set ES6æ–°çš„
   const arr = [1, 2, 2, 3, 4, 4, 5];
   const uniqueArr = [...new Set(arr)];
   ```

2. ```js
   // ä½¿ç”¨filterè¿‡æ»¤
   const arr = [1, 2, 2, 3, 4, 4, 5];
   // åˆ¤æ–­å½“å‰å…ƒç´ çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®æ˜¯å¦ç­‰äºå½“å‰ç´¢å¼•ï¼Œå¦‚æœæ˜¯ï¼Œè¯´æ˜æ˜¯ç¬¬ä¸€æ¬¡å‡ºç°ï¼Œå› æ­¤ä¿ç•™è¯¥å…ƒç´ 
   // filter() æ–¹æ³•åˆ›å»ºç»™å®šæ•°ç»„ä¸€éƒ¨åˆ†çš„æµ…æ‹·è´ï¼Œå…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚
   const uniqueArr = arr.filter((value, index, self) => 					self.indexOf(value) === index;
         // return arr.includes(item)
         );
   ```

3. ```javascript
   // åŒå±‚forå¾ªç¯é…åˆsplice
   // 
   function distinct(arr) {
       for (let i=0, len=arr.length; i<len; i++) {
           for (let j=i+1; j<len; j++) {
               if (arr[i] == arr[j]) {
                   arr.splice(j, 1);
                   // splice ä¼šæ”¹å˜æ•°ç»„é•¿åº¦ï¼Œæ‰€ä»¥è¦å°†æ•°ç»„é•¿åº¦ len å’Œä¸‹æ ‡ j å‡ä¸€
                   len--;
                   j--;
               }
           }
       }
       return arr;
   }
   ```

4. ```js
   // reduceæ–¹æ³•å®ç°
   function uniqueArray(arr) {
     return arr.reduce((accumulator, currentValue) => {
       // åˆ¤æ–­å½“å‰å€¼æ˜¯å¦å·²ç»å­˜åœ¨äºç»“æœæ•°ç»„ä¸­
       if (!accumulator.includes(currentValue)) {
         accumulator.push(currentValue);  // å¦‚æœæ²¡æœ‰ï¼ŒåŠ å…¥ç»“æœæ•°ç»„
       }
       return accumulator;
     }, []);  // åˆå§‹å€¼æ˜¯ä¸€ä¸ªç©ºæ•°ç»„
   }
   ```

#### ç±»æ•°ç»„è½¬æ•°ç»„çš„æ–¹æ³•

```js
const arrayLike=document.querySelectorAll('div')

// 1.æ‰©å±•è¿ç®—ç¬¦
[...arrayLike]
// 2.Array.from
Array.from(arrayLike)
// 3.Array.prototype.slice
Array.prototype.slice.call(arrayLike)
// 4.Array.apply
Array.apply(null, arrayLike)
// 5.Array.prototype.concat
Array.prototype.concat.apply([], arrayLike)

```

### 

### è®¾è®¡æ¨¡å¼

#### å‘å¸ƒè®¢é˜…æ¨¡å¼

å‘å¸ƒ-è®¢é˜…æ¨¡å¼æ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œå…è®¸å¯¹è±¡ä¹‹é—´è¿›è¡Œ**è§£è€¦çš„é€šä¿¡**ã€‚

```js
Class PubSub{
  constructor(){
    // ç»´æŠ¤ä¸€ä¸ªäº‹ä»¶ä¸­å¿ƒï¼ˆeventMapï¼‰ï¼Œç”¨äºå­˜å‚¨ä¸åŒäº‹ä»¶åŠå…¶å¯¹åº”çš„å›è°ƒåˆ—è¡¨ã€‚
    this.eventMap = new Map();
  }
  
  // è®¢é˜…äº‹ä»¶ï¼ŒæŠŠå›è°ƒå­˜å…¥ eventMapã€‚
  on(event, callback){
    if(!this.eventMap.has(event)){
      this.eventMap.set(event);
    }
    this.eventMap.get(event).push(callback);
  }
  // å‘å¸ƒäº‹ä»¶ï¼Œæ‰§è¡Œæ‰€æœ‰è®¢é˜…è¯¥äº‹ä»¶çš„å›è°ƒï¼Œå¹¶ä¼ é€’æ•°æ®ã€‚
  emit(event, callback){
    if(this.eventMap.has(event)){
      this.eventMap.get(event).forEach(callback=>callback(data))
    }
  }
  // å–æ¶ˆæŸæ—¶é—´çš„ç‰¹å®šå›è°ƒ
  off(event,callback){
    if(this.eventMap.has(event)){
      const callbacks = this.eventMap.get(event).filter(cd => cb !== callback);
      this.eventMao.set(event,callbacks);
    }
  }
  // å–æ¶ˆæŸä¸€äº‹ä»¶çš„æ‰€æœ‰å›è°ƒ å³æ‰€æœ‰è®¢é˜…è€…
  offAll(event){
    if(this.eventMap.has(event)){
      this.eventMap.delete(event);
    }
  }
  // ä»…æ‰§è¡Œä¸€æ¬¡çš„è®¢é˜…
  once(event, callback){
    const fn = (data) => {
      callback(data);
      this.off(event, fn);
    }
    this.on(event, fn);
  }
}
export const pubSub = new PubSub();
```

#### **æµ‹è¯•ç”¨ä¾‹**

```js
// subscriber.js - è®¢é˜…è€…
import { pubSub } from "./pubsub.js";

function handleMessage(data) {
    console.log("æ”¶åˆ°æ¶ˆæ¯:", data);
}

// è®¢é˜… "message" äº‹ä»¶
pubSub.on("message", handleMessage);
```



```js
// subscriber.js - è®¢é˜…è€…
import { pubSub } from "./pubsub.js";

function handleMessage(data) {
    console.log("æ”¶åˆ°æ¶ˆæ¯:", data);
}

// è®¢é˜… "message" äº‹ä»¶
pubSub.on("message", handleMessage);

```



#### è§‚å¯Ÿè€…æ¨¡å¼

è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ**å®ƒå…è®¸å¯¹è±¡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰ç»´æŠ¤ä¸€ç»„ä¾èµ–è€…ï¼ˆè§‚å¯Ÿè€…ï¼‰ï¼Œå¹¶åœ¨çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…**ã€‚

å‘å¸ƒè®¢é˜…æ¨¡å¼ç®¡ç†äº‹ä»¶çš„å›è°ƒé˜Ÿåˆ—ï¼Œè§‚å¯Ÿè€…æ¨¡å¼ç®¡ç†è§‚å¯Ÿè€…

```javascript
// è¢«è§‚å¯Ÿè€…
Class Subject{
  constructor(){
    this.observer = new Set();// è§‚å¯Ÿè€…åˆ—è¡¨
  }
  addObserver(observer){
    this.observer.push(observer);
  }
  removeObserver(observer){
    this.observers = this.observers.filter(obs => obs !== observer);
  }
  // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
  notify(data){
    this.observer.forEach(observer=>observer.update(data));
  }
}

// å¯¼å‡ºå…¨å±€å®ä¾‹ï¼Œä¿è¯ä¸åŒæ–‡ä»¶ä½¿ç”¨åŒä¸€ä¸ª Subject
export const subject = new Subject();
```

```js
// observerA.js - è§‚å¯Ÿè€… A
import { subject } from "./subject.js";

const observerA = {
    update: (data) => console.log("ğŸ‘€ è§‚å¯Ÿè€… A æ”¶åˆ°æ•°æ®:", data)
};

// æ³¨å†Œè§‚å¯Ÿè€… A
subject.addObserver(observerA);
```

#### å•ä¾‹æ¨¡å¼

```js
// singleton.js
class Singleton {
    constructor() {
        if (!Singleton.instance) {
            Singleton.instance = this;
        }
        return Singleton.instance;
    }
}

export default new Singleton(); // ç›´æ¥å¯¼å‡ºå”¯ä¸€å®ä¾‹
```



1. å†’æ³¡ä¼ æœ€å¤§
2. é€‰æ‹©æ’åºé€æ¸æ‰¾æœ€å°çš„
3. æ’å…¥æ’åº é€ä¸ªå‘é‡Œæ’
4. å½’å¹¶æ’åº åˆ†æˆå­åºåˆ—
5. 



### æ’åºç®—æ³•

#### å†’æ³¡æ’åº Bubble sort

æ—¶é—´å¤æ‚åº¦O(n^2)

```js
const bubble = function(array){
  const len = array.length;
  for(let i = 0; i < len - 1; i++){
    let sawp = false;
    for (let j = 0; j < len - 1 - i; j++) {
      if(array[j] > array[j+1]){
        [array[j], array[j+1]] = [array[j+1], array[j]];
        swap = true;
      }
      if(swap === false){
        return array;
      }
    }
  }
}
```



#### é€‰æ‹©æ’åº selection sort

æ—¶é—´å¤æ‚åº¦O(n^2)

```js
const select = function(array){
  const len = array.length;
  for(let i = 0; i < len; i++){
    let minIndex = i;
    for(let j = i+1; j < len; j++){
      if(array[j] < array[minIndex]){
        minIndex = j;
      }
    }
    if(minIndex !== i){
      [array[i], array[minIndex]] = [array[minIndex], array[i]];
    }
  }
  return array;
}
```



#### æ’å…¥æ’åº insertion sort

æ—¶é—´å¤æ‚åº¦O(n^2)

```js
const insert = function(array){
  const len = array.length;
  for(let i = 1; i < len; i++){
    let key = arr[i];
    let j = i - 1;
    while(j >= 0 && array[i] < array[j]){
      array[j + 1] = array[j];
      j--;
    }
    array[j+1] = key;
  }
  return array;
}
```



#### å½’å¹¶æ’åº merge sort

æ—¶é—´å¤æ‚åº¦O(n log n)

```js
const mergeSort = function(arr){
  if(arr.length <= 1){
    return arr;
  }
  
  const merge = (left, right) => {
    let result = [], i = 0, j = 0;
    while(i < left.length && j < right.length){
      result.push(left[i] < right[j] ? left[i++] : right[j++]);
    }
    return result.concat(left[i], right[j]);
  }
  
  let mid = Math.floor(arr.length / 2);
  // sliceåŒ…å«å·¦ä¾§ä¸åŒ…å«å³ä¾§
  let left = mergeSort(arr.slice(0, mid));
  let right = mergeSort(arr.slice(mid));
  
  return merge(left, right);
}
```



#### å¿«é€Ÿæ’åº quick sort

å¿«é€Ÿæ’åºï¼ˆQuick Sortï¼‰æ˜¯ä¸€ç§ **åˆ†æ²»æ³•**ï¼ˆDivide and Conquerï¼‰æ’åºç®—æ³•ï¼Œå®ƒé€šè¿‡é€‰å–ä¸€ä¸ªâ€œåŸºå‡†å…ƒç´ â€ï¼ˆpivotï¼‰ï¼Œç„¶åå°†æ•°ç»„åˆ†æˆä¸¤ä¸ªå­æ•°ç»„ï¼Œä½¿å¾—å·¦å­æ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½å°äºç­‰äºåŸºå‡†å…ƒç´ ï¼Œå³å­æ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§äºç­‰äºåŸºå‡†å…ƒç´ 

æ—¶é—´å¤æ‚åº¦ï¼šO(n log n)ï¼Œä½†æœ€åæƒ…å†µä¸‹ O(nÂ²)

```js
const quick = function(arr){
  if (arr.length <= 1) return arr;
  
  let pivot = arr[Math.floor(arr.length / 2)];
  let left = arr.filter(x => x < pivot);
  let middle = arr.filter(x => x === pivot);
  let right = arr.filter(x => x > pivot);
  
  return quick(left).concat(middle, quick(right));
}
```



### å‡½æ•°çš„æŸ¯é‡ŒåŒ–currying

**æŸ¯é‡ŒåŒ–**æ˜¯ä¸€ç§å°†æ¥æ”¶å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—æ¥æ”¶å•ä¸€å‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯ã€‚é€šè¿‡æŸ¯é‡ŒåŒ–ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è½¬åŒ–ä¸ºä¸€ç³»åˆ—å¯ä»¥é€ä¸ªæ¥æ”¶å•ä¸€å‚æ•°å¹¶è¿”å›æ–°å‡½æ•°çš„å‡½æ•°ã€‚

æ¥æ”¶ä¸€éƒ¨åˆ†å‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°æ¥æ”¶å‰©ä½™å‚æ•°ï¼Œæ¥æ”¶è¶³å¤Ÿå‚æ•°åï¼Œæ‰§è¡ŒåŸå‡½æ•°

æŸ¯é‡ŒåŒ–çš„ä¼˜åŠ¿

- **éƒ¨åˆ†åº”ç”¨**ï¼šå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°å¹¶æä¾›ä¸€éƒ¨åˆ†å‚æ•°ï¼Œç¨åå†æä¾›å‰©ä¸‹çš„å‚æ•°ã€‚

- **å»¶è¿Ÿè®¡ç®—**ï¼šé€šè¿‡é€æ­¥ä¼ é€’å‚æ•°ï¼Œå¯ä»¥å®ç°å‡½æ•°è°ƒç”¨çš„å»¶è¿Ÿæ‰§è¡Œã€‚

- **æé«˜å‡½æ•°å¤ç”¨æ€§**ï¼šå½“æŸäº›å‚æ•°å·²çŸ¥æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶å¤ç”¨å®ƒã€‚

å‚æ•°å¤ç”¨`ã€`æå‰è¿”å›`å’Œ`å»¶è¿Ÿæ‰§è¡Œ

```js
// curry(fn)ï¼šæ¥å—ä¸€ä¸ªå‡½æ•° fnï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ã€‚
function curry(fn){
  // fnçš„å‚æ•°é•¿åº¦
  const fnArgsLen = fn.length;
  let args = [];
  return function calc(...newArgs){
    args = [
      			...args,
            ...newArgs
           ]
    // ç§¯ç´¯çš„å‚æ•°é•¿åº¦è·Ÿä¼ å…¥å‡½æ•°çš„å‚æ•°é•¿åº¦å¯¹æ¯”
    if(args.length < fnArgsLen){
      // å‚æ•°ä¸å¤Ÿï¼Œè¿”å›å‡½æ•° ç»§ç»­æ¥æ”¶å‚æ•°
      return calc;
    } else {
       // ä¼ å…¥è¶…è¿‡fnArgsLengthé•¿åº¦çš„å‚æ•°æ²¡æœ‰æ„ä¹‰
      fn.apply(this, args.slice(0, fnArgsLen))
    }
  }
}
```

æµ‹è¯•

```js
const multiply = (a, b, c, d) => a * b * c * d;
const curriedMultiply = curry(multiply);

console.log(curriedMultiply(2)(3)(4)(5)); // 120
```



### å­—ç¬¦ä¸²ç›¸å…³

Replace å‚æ•°ï¼š

1. **$0ï¼ˆæˆ– matchï¼‰**ï¼šå®Œæ•´åŒ¹é…åˆ°çš„å­—ç¬¦ä¸²ã€‚
2. **$1, $2, ...**ï¼šä»£è¡¨æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„**æ•è·ç»„**ï¼ˆ() å†…çš„éƒ¨åˆ†ï¼‰ã€‚

#### æŸ¥æ‰¾å‡ºç°æœ€å¤šçš„å­—ç¬¦å’Œæ•°å­—

```js
let str = "abcabcabcbbccccc";
let num = 0;
let char = '';

 // ä½¿å…¶æŒ‰ç…§ä¸€å®šçš„æ¬¡åºæ’åˆ—
str = str.split('').sort().join('');
// "aaabbbbbcccccccc"

// å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼
let re = /(\w)\1+/g;
str.replace(re,($0,$1) => {
    if(num < $0.length){
        num = $0.length;
        char = $1;        
    }
});
console.log(`å­—ç¬¦æœ€å¤šçš„æ˜¯${char}ï¼Œå‡ºç°äº†${num}æ¬¡`);

```



#### å­—ç¬¦ä¸²æŸ¥æ‰¾

```js
function isContain(a, b) {
  for (let i = 0; i < b.length; i++) {
    if (a[0] === b[i]) {
      let tmp = true;
      for (let j = 0; j < a.length; j++) {
        if (a[j] !== b[i + j]) { // ç›´æ¥ç”¨ i + j
          tmp = false;
          break;
        }
      }
      if (tmp) return i;
    }
  }
  return -1;
}
```



### è¿­ä»£å™¨å’Œç”Ÿæˆå™¨ Iterator&&Generator

**è¿­ä»£å™¨** é€‚åˆ**éå†æ•°æ®ç»“æ„**ï¼Œè€Œ **ç”Ÿæˆå™¨** é€‚åˆ**æ§åˆ¶æµç¨‹ï¼ˆå¼‚æ­¥/åŠ¨ç”»/æ‡’åŠ è½½ï¼‰**ï¼Œåœ¨å‰ç«¯å¼€å‘ä¸­èƒ½æå¤§ä¼˜åŒ–**æ€§èƒ½**å’Œ**ä»£ç å¯è¯»æ€§**ï¼

#### è¿­ä»£å™¨

è¿­ä»£å™¨å°±æ˜¯ä¸€ä¸ª**èƒ½è®°ä½å½“å‰è¿›åº¦**ï¼Œå¹¶ä¸”**æŒ‰éœ€æä¾›**æ•°æ®çš„å¯¹è±¡ã€‚

```js
function createIterator(arr) {
  let index = 0;
  return {
    next() {
      if (index < arr.length) {
        return { value: arr[index++], done: false };  // å–å½“å‰å…ƒç´ 
      } else {
        return { value: undefined, done: true };  // æ²¡äº†
      }
    },
  };
}

// è¯•è¯•çœ‹
const it = createIterator(["ğŸ•", "ğŸ”", "ğŸŸ"]);
console.log(it.next()); // { value: "ğŸ•", done: false }
console.log(it.next()); // { value: "ğŸ”", done: false }
console.log(it.next()); // { value: "ğŸŸ", done: false }
console.log(it.next()); // { value: undefined, done: true }
```



#### ç”Ÿæˆå™¨

ç”Ÿæˆå™¨å°±æ˜¯ä¸€ä¸ª**å¯ä»¥æš‚åœçš„å‡½æ•°**ï¼Œä½ è°ƒç”¨å®ƒæ—¶ï¼Œå®ƒ**ä¸ä¼šä¸€æ¬¡æ€§è·‘å®Œ**ï¼Œè€Œæ˜¯**ä¸€æ­¥ä¸€æ­¥æ‰§è¡Œ**ï¼Œæ¯æ¬¡ yield æš‚åœï¼Œç­‰ä½ ä¸‹æ¬¡å«å®ƒï¼Œå®ƒæ‰ç»§ç»­è·‘ã€‚

1. ç”Ÿæˆå™¨ç”¨ function* å®šä¹‰ï¼Œé‡Œé¢ç”¨ yield äº§å‡ºå€¼ã€‚
2. next() åªè·‘åˆ° yieldï¼Œç­‰ä¸‹ä¸€æ¬¡ next() æ‰ç»§ç»­ã€‚
3. ç›´åˆ° done: trueï¼Œè¡¨ç¤ºæ²¡æœ‰äº†ã€‚

```js
function* infiniteNumbers() {
  let num = 1;
  while (true) {
    yield num++; // ä¸€ç›´äº§ç”Ÿæ•°å­—
  }
}

const numGen = infiniteNumbers();
console.log(numGen.next().value); // 1
console.log(numGen.next().value); // 2
console.log(numGen.next().value); // 3
```

**æ¨¡æ‹Ÿå¼‚æ­¥ä»»åŠ¡**ï¼Œæ¯”å¦‚**å…ˆç­‰APIæ•°æ®è¿”å›ï¼Œå†å¤„ç†æ•°æ®**ï¼š

```js
function* asyncTask() {
  console.log("å¼€å§‹è¯·æ±‚æ•°æ®...");
  const data = yield fetch("https://jsonplaceholder.typicode.com/todos/1")
    .then(res => res.json());
  console.log("æ•°æ®æ¥äº†ï¼š", data);
}

const gen = asyncTask();
const { value } = gen.next(); // å…ˆæ‰§è¡Œç¬¬ä¸€æ­¥

value.then(data => gen.next(data)); // æ•°æ®è¿”å›åç»§ç»­
```

**ä½¿ç”¨generatorå¤„ç†å¤§é‡æ•°æ®ï¼ˆæ‡’åŠ è½½&åˆ†æ‰¹æ¸²æŸ“ï¼‰**

**åœºæ™¯ï¼š** å¦‚æœä½ éœ€è¦åœ¨é¡µé¢ä¸Šæ¸²æŸ“ä¸€ä¸ª **è¶…é•¿åˆ—è¡¨ï¼ˆå¦‚ 10 ä¸‡æ¡æ•°æ®ï¼‰**ï¼Œç›´æ¥ map æ¸²æŸ“ä¼š**å¡æ­»é¡µé¢**ï¼Œè€Œ**ç”Ÿæˆå™¨**å¯ä»¥æŒ‰éœ€åŠ è½½ï¼Œæå‡æ€§èƒ½ã€‚

```js
function* loadData(data, batchSize) {
  let index = 0;
  while (index < data.length) {
    yield data.slice(index, index + batchSize); // æ¯æ¬¡è¿”å›ä¸€æ‰¹æ•°æ®
    index += batchSize;
  }
}

// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè¶…é•¿æ•°ç»„
const longList = Array.from({ length: 100000 }, (_, i) => `Item ${i}`);

const generator = loadData(longList, 1000); // æ¯æ¬¡åŠ è½½ 1000 æ¡
function renderNextBatch() {
  const { value, done } = generator.next();
  if (!done) {
    console.log("åŠ è½½æ•°æ®:", value.length);
    setTimeout(renderNextBatch, 500); // æ¨¡æ‹Ÿå¼‚æ­¥åŠ è½½
  }
}
renderNextBatch();
```



**è½®è¯¢æ•°æ®**

```js
function* pollData(interval) {
  while (true) {
    yield new Promise(resolve => {
      setTimeout(async () => {
        const res = await fetch("https://jsonplaceholder.typicode.com/todos/1").then(r => r.json());
        console.log("æ–°æ•°æ®ï¼š", res);
        resolve();
      }, interval);
    });
  }
}
const polling = pollData(2000); // 2 ç§’è¯·æ±‚ä¸€æ¬¡
function startPolling() {
  polling.next().value.then(startPolling); // é€’å½’è°ƒç”¨
}
startPolling();
```

